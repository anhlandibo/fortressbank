# =============================================================================
# FORTRESSBANK - PRODUCTION ENVIRONMENT TEMPLATE
# =============================================================================
# 
# CRITICAL SECURITY INSTRUCTIONS:
#   1. Copy this file to .env.prod
#   2. Generate all passwords using: openssl rand -base64 32
#   3. NEVER commit .env.prod to version control
#   4. Store production secrets in a secrets manager (Vault, AWS Secrets Manager, etc.)
#   5. Rotate secrets regularly (every 90 days minimum)
#
# For Kubernetes/Docker Swarm, use native secrets management instead of env files
#
# =============================================================================

# -----------------------------------------------------------------------------
# DATABASE CREDENTIALS
# Generate with: openssl rand -base64 32 | tr -dc 'a-zA-Z0-9' | head -c 32
# -----------------------------------------------------------------------------
DB_USER=fortressbank_app
DB_PASSWORD=GENERATE_SECURE_PASSWORD_HERE

USER_DB_NAME=userdb
ACCOUNT_DB_NAME=accountdb
TRANSACTION_DB_NAME=transactiondb

# Keycloak Database (separate credentials)
KEYCLOAK_DB_USER=keycloak_app
KEYCLOAK_DB_PASSWORD=GENERATE_SECURE_PASSWORD_HERE

# -----------------------------------------------------------------------------
# KEYCLOAK ADMIN CREDENTIALS
# IMPORTANT: Change immediately after first login, or disable admin console
# Generate password with: openssl rand -base64 32
# -----------------------------------------------------------------------------
KEYCLOAK_ADMIN_USER=admin
KEYCLOAK_ADMIN_PASSWORD=GENERATE_SECURE_PASSWORD_HERE
KEYCLOAK_HOSTNAME=auth.yourdomain.com

# -----------------------------------------------------------------------------
# REDIS AUTHENTICATION
# Generate with: openssl rand -base64 32
# -----------------------------------------------------------------------------
REDIS_PASSWORD=GENERATE_SECURE_PASSWORD_HERE

# -----------------------------------------------------------------------------
# RABBITMQ CREDENTIALS
# Generate password with: openssl rand -base64 32
# -----------------------------------------------------------------------------
RABBITMQ_USER=fortressbank_mq
RABBITMQ_PASSWORD=GENERATE_SECURE_PASSWORD_HERE

# -----------------------------------------------------------------------------
# KONG API GATEWAY
# These should match your TLS certificate configuration
# -----------------------------------------------------------------------------
# IPs of your load balancer/reverse proxy for X-Forwarded-For trust
TRUSTED_PROXY_IPS=10.0.0.0/8,172.16.0.0/12

# -----------------------------------------------------------------------------
# KONG OIDC CLIENT SECRET
# Get this from Keycloak admin console: Clients > kong > Credentials
# Generate new secret in Keycloak, then update here
# -----------------------------------------------------------------------------
KONG_OIDC_CLIENT_SECRET=GENERATE_IN_KEYCLOAK_AND_PASTE_HERE

# -----------------------------------------------------------------------------
# SESSION SECRETS
# Generate with: openssl rand -base64 32
# -----------------------------------------------------------------------------
SESSION_SECRET=GENERATE_SECURE_PASSWORD_HERE

# -----------------------------------------------------------------------------
# EMAIL CONFIGURATION (Production SMTP)
# Use a transactional email service (SendGrid, AWS SES, etc.)
# -----------------------------------------------------------------------------
MAIL_HOST=smtp.sendgrid.net
MAIL_PORT=587
MAIL_USERNAME=apikey
MAIL_PASSWORD=YOUR_SENDGRID_API_KEY
EMAIL_FROM=noreply@yourdomain.com
EMAIL_FROM_NAME=Fortress Bank

# -----------------------------------------------------------------------------
# JWT/OAUTH2 CONFIGURATION
# Must use HTTPS in production
# -----------------------------------------------------------------------------
JWT_ISSUER_URI=https://auth.yourdomain.com/realms/fortressbank-realm

# -----------------------------------------------------------------------------
# SPRING PROFILES
# -----------------------------------------------------------------------------
SPRING_PROFILES_ACTIVE=prod

# =============================================================================
# POST-DEPLOYMENT SECURITY CHECKLIST
# =============================================================================
# [ ] Verify TLS certificates are valid and from trusted CA
# [ ] Test that admin ports are not accessible from public internet
# [ ] Verify database ports are not accessible from public internet
# [ ] Run vulnerability scan (nmap, nikto, OWASP ZAP)
# [ ] Test rate limiting is working
# [ ] Verify brute force protection is enabled in Keycloak
# [ ] Set up log aggregation and alerting
# [ ] Configure backup automation for databases
# [ ] Set up monitoring dashboards (CPU, memory, error rates)
# [ ] Document incident response procedures
# =============================================================================
