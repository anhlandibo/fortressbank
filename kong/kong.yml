_format_version: "3.0"

services:
- name: user-service
  url: http://user-service:4000
  routes:
  - name: user-service-route
    paths:
    - /users
    strip_path: true

- name: account-service
  url: http://account-service:4001
  routes:
  - name: account-service-route
    paths:
    - /accounts
    strip_path: true

plugins:
- name: openid-connect
  service: user-service
  config:
    client_id: "kong"
    client_secret: "XLODsjH5G3f9iqGftbrkdHeNw3NVfNdZ"
    discovery: "http://keycloak:8080/realms/fortressbank-realm/.well-known/openid-configuration"
    session_secret: "nk7b1GLYLE8XuDXVen2ENvpJo1BrkNGC"
    scope: "openid profile email"
    ssl_verify: false

- name: openid-connect
  service: account-service
  config:
    client_id: "kong"
    client_secret: "XLODsjH5G3f9iqGftbrkdHeNw3NVfNdZ"
    discovery: "http://keycloak:8080/realms/fortressbank-realm/.well-known/openid-configuration"
    session_secret: "nk7b1GLYLE8XuDXVen2ENvpJo1BrkNGC"
    scope: "openid profile email"
    ssl_verify: false